<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Î©îÎ¶¨ÎÇò ÌÅ¨Î¶¨Ïä§ÎßàÏä§</title>

<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
<script src="https://www.youtube.com/iframe_api"></script>

<style>
body {
  margin: 0;
  padding: 20px;
  background: #0e0e0e;
  color: #eee;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
}

.container {
  max-width: 900px;
  margin: auto;
}

/* ‚ú® Neon */
.neon-youtube {
  display: block;
  text-align: center;
  margin-bottom: 16px;
  font-family: "Pacifico", cursive;
  font-size: clamp(24px, 5vw, 36px);
  color: #ffb7d5;
  text-decoration: none;
  opacity: 0.25;
  text-shadow: none;
  transition: all 0.4s ease;
}

.neon-youtube.on {
  opacity: 1;
  text-shadow:
    0 0 4px #ff8ccf,
    0 0 10px #ff4fa3,
    0 0 20px #ff4fa3,
    0 0 40px rgba(255,79,163,0.9);
}

/* üì∫ TV */
.tv {
  display: flex;
  justify-content: center;
  margin-bottom: 12px;
}

.tv-frame {
  background: linear-gradient(145deg, #5a2f1a, #3b1f12);
  padding: 18px;
  border-radius: 20px;
  box-shadow:
    inset -6px -6px 0 rgba(0,0,0,0.35),
    inset 6px 6px 0 rgba(255,255,255,0.05),
    0 20px 45px rgba(0,0,0,0.6);
}

.tv-screen {
  width: min(760px, 94vw);
  aspect-ratio: 16 / 9;
  background: black;
  border-radius: 12px;
  overflow: hidden;
}

iframe {
  width: 100%;
  height: 100%;
  border: none;
}

/* ‚ñ∂ Now Playing (NEW POSITION) */
.now-playing {
  max-width: 760px;
  margin: 6px auto 10px;
  text-align: left;
  font-size: 0.9em;
  color: #bbb;
  padding-left: 4px;
}

/* ‚è± Progress */
.progress-wrap {
  width: 100%;
  max-width: 760px;
  height: 6px;
  background: #222;
  border-radius: 999px;
  margin: 0 auto 18px;
  overflow: hidden;
}

.progress-bar {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #ff4fa3, #ffb7d5);
}

/* üéõ Controls */
.controls {
  display: flex;
  gap: 8px;
  justify-content: center;
  flex-wrap: wrap;
  margin-bottom: 20px;
}

button {
  background: #1f1f1f;
  color: #eee;
  border: none;
  padding: 12px 16px;
  border-radius: 8px;
  cursor: pointer;
}

button.active {
  background: #444;
}

/* üéµ Playlist */
.playlist {
  display: grid;
  gap: 10px;
}

.track {
  padding: 14px;
  background: #161616;
  border-radius: 8px;
  cursor: pointer;
}

.track:hover { background: #2a2a2a; }
.track.active { background: #3a3a3a; }

.track span {
  font-size: 0.8em;
  color: #aaa;
}
</style>
</head>

<body>
<div class="container">

  <a class="neon-youtube"
     href="https://www.youtube.com/@lenaparklive"
     target="_blank"
     rel="noopener noreferrer">
    ‚ñ∂ @lenaparklive
  </a>

  <div class="tv">
    <div class="tv-frame">
      <div class="tv-screen">
        <div id="player"></div>
      </div>
    </div>
  </div>

  <!-- üîΩ MOVED HERE -->
  <div class="now-playing" id="nowPlaying">Now Playing: ‚Äî</div>

  <div class="progress-wrap">
    <div class="progress-bar" id="progressBar"></div>
  </div>

  <div class="controls">
    <button onclick="prevTrack()">‚óÄ Prev</button>
    <button onclick="nextTrack()">Next ‚ñ∂</button>
    <button id="shuffleBtn" onclick="toggleShuffle()">Shuffle</button>
    <button id="repeatBtn" onclick="toggleRepeat()">Repeat: OFF</button>
  </div>

  <div class="playlist" id="playlist"></div>

</div>

<script>
const tracks = [
  {
    title: "White Christmas",
    note: "Jazz Ver.",
    videoId: "f5V0PpyTXNI",
    start: 95
  },
  {
    title: "Santa Tell Me",
    note: "",
    videoId: "UDJJnVyUvmA",
    start: 149
  },
  {
    title: "Ïã±Ïà≠ÏÉùÏà≠",
    note: "with Îã§Ïù¥ÎÇòÎØπ ÎìÄÏò§",
    videoId: "C_zfF1xdYHQ",
    start: 1
  },
  {
    title: "It's a New Christmas",
    note: "015B with Î∞ïÏ†ïÌòÑ",
    videoId: "0MxxHi-l9vM",
    start: 0
  },
  {
    title: "All I Want for Christmas Is You",
    note: "2010.12.12",
    videoId: "K04wfBmxB28",
    start: 5
  },
  {
    title: "Let It Snow",
    note: "BMW 2022",
    videoId: "rJ0uQ4bZ0WY",
    start: 0
  },
  {
    title: "Have Yourself A Merry Little Christmas",
    note: "BMW 2022",
    videoId: "rrK7QmfnJ1o",
    start: 0
  },
  {
    title: "Last Christmas",
    note: "with Îã§Ïù¥ÎÇòÎØπ ÎìÄÏò§",
    videoId: "mLeMqtAa1PQ",
    start: 0,
    end: 267
  },
  {
    title: "Santa Claus Is Coming To Town",
    note: "Play! 2024",
    videoId: "bdl5L0hYRtM",
    start: 568,
    end: 724
  },
  {
    title: "ÌïòÏñÄÍ≤®Ïö∏",
    note: "with ÍπÄÎ≤îÏàò",
    videoId: "er1RYWQf0Gc",
    start: 0
  },
  {
    title: "Winter Kiss",
    note: "feat. Î∞±Ï∞¨",
    videoId: "Y-C9dZiWJaM",
    start: 0
  }
];

let player;
let currentIndex = 0;
let shuffle = false;
let repeatMode = "off";
let isFirstPlay = true;

const neon = document.querySelector(".neon-youtube");
const nowPlaying = document.getElementById("nowPlaying");
const playlistEl = document.getElementById("playlist");
const shuffleBtn = document.getElementById("shuffleBtn");
const repeatBtn = document.getElementById("repeatBtn");
const progressBar = document.getElementById("progressBar");

function neonFlash() {
  neon.classList.remove("on");
  void neon.offsetWidth;
  neon.classList.add("on");
}

function onYouTubeIframeAPIReady() {
  player = new YT.Player("player", {
    videoId: tracks[0].videoId,
    playerVars: { autoplay: 0 },
    events: {
      onReady: () => playTrack(0),
      onStateChange: e => {
        if (e.data === YT.PlayerState.ENDED) {
          if (repeatMode === "one") playTrack(currentIndex);
          else nextTrack();
        }
      }
    }
  });
}

function playTrack(i) {
  currentIndex = i;
  const t = tracks[i];

  if (isFirstPlay) {
    player.cueVideoById({ videoId:t.videoId, startSeconds:t.start||0, endSeconds:t.end });
    isFirstPlay = false;
  } else {
    player.loadVideoById({ videoId:t.videoId, startSeconds:t.start||0, endSeconds:t.end });
  }

  nowPlaying.textContent = "Now Playing: " + t.title;
  neonFlash();
  updateActive();
}

function nextTrack() {
  currentIndex = shuffle ? Math.floor(Math.random()*tracks.length) : (currentIndex+1)%tracks.length;
  playTrack(currentIndex);
}

function prevTrack() {
  currentIndex = (currentIndex-1+tracks.length)%tracks.length;
  playTrack(currentIndex);
}

function toggleShuffle() {
  shuffle = !shuffle;
  shuffleBtn.classList.toggle("active", shuffle);
}

function toggleRepeat() {
  repeatMode = repeatMode==="off"?"one":repeatMode==="one"?"all":"off";
  repeatBtn.textContent = "Repeat: " + repeatMode.toUpperCase();
  repeatBtn.classList.toggle("active", repeatMode!=="off");
}

function loadPlaylist() {
  playlistEl.innerHTML="";
  tracks.forEach((t,i)=>{
    const d=document.createElement("div");
    d.className="track";
    d.innerHTML=`<strong>${t.title}</strong><br><span>${t.note}</span>`;
    d.onclick=()=>playTrack(i);
    playlistEl.appendChild(d);
  });
}

function updateActive() {
  document.querySelectorAll(".track").forEach((el,i)=>{
    el.classList.toggle("active", i===currentIndex);
    if(i===currentIndex) el.scrollIntoView({behavior:"smooth",block:"center"});
  });
}

setInterval(()=>{
  if(player?.getDuration){
    const d=player.getDuration();
    const c=player.getCurrentTime();
    if(d>0) progressBar.style.width=(c/d)*100+"%";
  }
},500);

loadPlaylist();
</script>
</body>
</html>
